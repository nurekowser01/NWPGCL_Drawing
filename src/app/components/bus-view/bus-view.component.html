<div *ngIf="section">
  <h1 class="section-title">{{ section.name }}</h1>
  
  <!-- Add search bar here -->
  <mat-form-field appearance="outline" class="search-bar">
    <mat-label>Search Breakers</mat-label>
    <input matInput [formControl]="searchControl" placeholder="Search by ID, description or drawing number">
    <mat-icon matSuffix>search</mat-icon>
  </mat-form-field>

  @if (searchTerm && filteredBuses.length === 0) {
    <div class="no-results">
      No breakers found matching "{{ searchTerm }}"
    </div>
  }

  <div class="bus-container">
    <mat-card *ngFor="let bus of filteredBuses" class="bus-card">
      <mat-card-header class="bus-header">
        <mat-card-title>
          {{ bus.id }}
          <span class="voltage-badge">({{ bus.voltage }} {{ bus.name }})</span>
        </mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <div class="panels-wrapper">
          <div class="panels-container">
            <mat-expansion-panel 
              *ngFor="let panel of bus.panels" 
              class="floating-panel"
              [expanded]="false">
              
              <mat-expansion-panel-header class="panel-header">
                <mat-panel-title class="panel-id">{{ panel.id }}</mat-panel-title>
              </mat-expansion-panel-header>

              <div class="breakers-container">
                <app-breaker 
                  *ngFor="let breaker of panel.breakers" 
                  [breaker]="breaker"
                  [busId]="bus.id"
                  [panelId]="panel.id">
                </app-breaker>
              </div>
            </mat-expansion-panel>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>